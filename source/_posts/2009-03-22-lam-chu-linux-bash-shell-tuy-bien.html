---
layout: post
title: "Làm chủ Linux Bash shell: Tùy biến command promt với biến $PS1"
date: 2009-03-22
comments: false
categories:
 - linux
 - làm chủ Bash shell
---

<div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_7HQMEKpIxtQ/SceuSTTESKI/AAAAAAAAAYU/1AoEwOUH9m0/s1600-h/T%C3%B9y+bi%E1%BA%BFn+command+promt+v%E1%BB%9Bi+bi%E1%BA%BFn+%24PS1.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 264px;" src="http://3.bp.blogspot.com/_7HQMEKpIxtQ/SceuSTTESKI/AAAAAAAAAYU/1AoEwOUH9m0/s400/T%C3%B9y+bi%E1%BA%BFn+command+promt+v%E1%BB%9Bi+bi%E1%BA%BFn+%24PS1.jpg" alt="" id="BLOGGER_PHOTO_ID_5316409514575284386" border="0" /></a><br /><span style="font-style: italic;">Tiếp tục seri bài làm chủ Linux Bash shell nào. Bài viết này được tôi dựa vào một tutorial của tôi trên FOTECH và mở rộng thêm, nếu bạn nào thấy hơi quen xin đừng thắc mắc >:).</span><br /><br />Bash shell có khả năng hiển thị trước mỗi dòng lệnh một đoạn thông tin ngắn, gọi là <span style="font-weight: bold;">dấu nhắc lệnh</span>, hay <span style="font-weight: bold;">command promt</span>. Mặc định có dạng:<br /><div class="codemain"><!--ec1--><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">[user]@[host]:[đường dẫn]$ </span></blockquote><span style="font-weight: bold;">VD:</span><br /><span style="color: rgb(0, 102, 0);font-family:courier new;" ><blockquote>thangphamduy@mr-PC:~$</blockquote></span><!--c2--></div>Bạn có thể tùy biến bằng cách sửa lại giá trị của biến môi trường PS1 như sau:<div class="codemain"><!--ec1--><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">PS1='<span style="font-style: italic;">[Noi dung muon hien thi]</span>'</span></blockquote><span style="font-weight: bold;">VD:</span> nếu dòng trên có nội dung là:<br /><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">PS1='Welcome to my Linux  '</span></blockquote>thì trước mỗi dòng lệnh sẽ hiển thị đúng xâu trên.<!--c2--></div><!--ec2--><br />Bạn có thể tùy biến xâu <span style="font-style: italic;font-family:courier new;" >[Noi dung muon hien thi]</span> bằng cách chèn vào một ký tự sau dấu thoát (backslash \) như sau:<div class="codemain" face="courier new"><!--ec1--><blockquote>\!    Hiển thị số thứ tự của lệnh trong history<br />\#    Hiển thị số thứ tự lệnh của lệnh hiện tại<br />\$    Hiển thị dấu $ nếu là user bình thường và dấu # nếu là user root<br />\\    Hiển thị dấu backslash (\)<br />\d    Hiển thị ngày hiện tại<br />\h    Hiển thị host name<br />\n    In dấu xuống dòng<br />\s    Hiển thị tên shell<br />\t    Hiển thị giờ hiện tại<br />\u    Hiển thị username<br />\W    Hiển thị tên thư mục hiện hành<br />\w    Hiển thị đường dẫn đầy đủ của thư mục hiện hành</blockquote><!--c2--></div><!--ec2--><span style="font-weight: bold;">Ví dụ:</span><div class="codemain" style="font-family: courier new;"><!--ec1--><blockquote><span style="color: rgb(0, 102, 0);">PS1='\u\$'</span><br />sẽ cho kết quả: "<span style="color: rgb(0, 102, 0);">root#</span>"<br /><span style="color: rgb(0, 102, 0);">PS1='\u@\t \w\$'</span><br />sẽ cho kết quả: "<span style="color: rgb(0, 102, 0);">root@20:49:48 /etc/httpd</span>#<br /><span style="color: rgb(0, 102, 0);">PS1='\t \u@\h \s \$'</span><br />sẽ cho kết quả: "<span style="color: rgb(0, 102, 0);">20:49:48 root@proLappy -bash #</span>"<br /></blockquote><!--c2--></div><!--ec2--><span style="font-weight: bold;">[*]Hiển thị màu:</span><br />Bạn thử thiết lập biến PS1 như sau và xem kết quả như thế nào ^^<div style="font-family: courier new; color: rgb(0, 102, 0);" class="codemain"><blockquote><!--ec1-->PS1='\[\033[01;32m\]\t \u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '<!--c2--></blockquote></div><!--ec2-->Bây giờ dấu nhắc lệnh đã có màu xanh lá cây :D. Quy tắc ở đây là thư thế nào? Nếu bạn muốn đặt một màu cho một phần tử nào đó của promt, bạn hãy đặt mã màu trước phần tử đó, và mã xóa màu sau phần tử đó.<br /><br /><span style="font-style: italic;">Mã màu có dạng:</span><br /><blockquote><span style="color: rgb(0, 102, 0);font-family:courier new;" >\[\033\[01;32m\]\]</span><br /></blockquote>Hãy thay thế 32 với các số trong khoảng 30 - 37 để nhận được các màu khác nhau, thay thế 01 với các số trong khoảng 00 - 07 để nhận được các cách tô màu khác nhau (làm nhạt màu, màu gạch chân, màu highlight,...)<br /><br /><span style="font-style: italic;">Mã đóng màu:</span><br /><blockquote></blockquote><blockquote style="font-family: courier new; color: rgb(0, 102, 0);">\[\033[00m\]</blockquote><span style="font-weight: bold;">[*] Lưu ý:</span><br />- Nếu bạn không sử dụng mã đóng màu thì màu đó sẽ còn hiệu lực cho tới khi bạn dùng một mã màu khác thay thế.<br />- Việc thiết lập mã màu chỉ có ý nghĩa với những terminal có hỗ trợ màu 16bit trở lên như <span style="font-family:courier new;">xterm</span>, <span style="font-family:courier new;">rxvt</span>, hay <span style="font-family:courier new;">gnome-terminal</span>, <span style="font-family:courier new;">konsole</span>,...<br /><u><b><br /></b></u>Okie. Như thế là bạn đã có thể thêm các thông tin hữu ích và đẹp mắt vào trước mỗi dòng lệnh trong terminal. Nhưng nếu bạn logout, giá trị vừa thiết lập cho biến $PS1 sẽ bị reset về giá trị default! Để không phải thiết lập lại giá trị của biến này, hãy thêm vào cuối file ~/.bashrc dòng lệnh sau để export giá trị mới cho biến môi trường PS1:<br /><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">export </span><span style="font-family:courier new;">PS1='\n\[\033[02;31m\]. ___ ___ ___\[\033[00m\] |--- \[\033[02;33m\]\t \d\n\[\033[02;31m\] /__// _// ./\[\033[00m\] --- \[\033[01;32m\]\w\n\[\033[02;31m\]/ . / \ /__/\[\033[00m\] \[\033[02;35m\]\u@\h \[\033[02;37m\]\$ \[\033[02;38m\]'</span></blockquote>Chúc các bạn ngày chủ nhật vui vẻ.<br /><br /><span style="font-weight: bold; color: rgb(0, 51, 0);">Update</span><span style="color: rgb(0, 51, 0);">:</span> Để xem danh sách các mã màu và một số ví dụ khác, xin đọc entry <a href="http://tuyetkiem.wordpress.com/2009/03/25/command-prompt-ps1/">Command promt và biến PS1</a> trên <a href="http://tuyetkiem.wordpress.com/">blog của tuyetkiem</a>.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>http://abebedorespgondufo.blogs.sapo.pt/</div>
<div class='content'>
Good blog.<BR/>Portugal</div>
</div>
</div>
